# Computer Networking

## TCP Handshake

1. 第一次握手:客户端将标志位SYN置为1，随机产生一个值序列号seq=x，并将该数据包发送给服务 端，客户端
    进入syn_sent状态，等待服务端确认。
2. 第二次握手:服务端收到数据包后由标志位SYN=1知道客户端请求建立连接，服务端将标志位SYN和ACK都置为1，ack=x+1,随机产生一个值seq=y，并将该数据包发送给客户端以确认连接请求，服务端进入syn_rcvd状态。
3. 第三次握手:客户端收到确认后检查,如果正确则将标志位ACK为1，ack=y+1，并将该数据包发送给服务端，服务端进行检查如果正确则连接建立成功，客户端和服务端进入established状态，完成三次握手，随后客户端和服务端之间可以开始传输数据了

不可以两次握手。假设client发送的一个报文段在某个网络节点长时间延迟从而失效，server收到此失效的连接请求报文段后，误认为是client再次发出的一个新的连接请求，从而向client发出确认报文段，client不会向server发出确认包，因此TCP连接不会建立。如果只采用两次握手，那么一旦server收到失效的报文就会建立连接。由于client不会回应server的确认也不会发送数据，因此很多资源会浪费在一个无效的连接上。